# 对于接口需要考虑所有异常分支

正常请求很容易考虑到，但是异常请求通常会忽略或者考虑不全。

#### 是否需要补偿？

如果一个接口对我们的成功率有要求，那么我们一定要考虑到接口的失败case，需不需要对失败的请求做出补偿。

最简单的例子就是，http请求失败了，最简单的办法就是retry重试。

有个问题就是，如果接口的性能也有要求，即有一个超时时间卡在这里，那么重试的次数和重试的间隔都需要充分考虑进去。

那么要是所有的重试都失败了怎么办呢？考虑通过日志、埋点、上报某些监控指标等手段，留档记录这些失败的记录，以便于后续分析。

所以这里就需要对业务进行失败考虑，如果我们的请求失败了，业务应该有一个最后的兜底策略。

