### 内存VS外村

* 内存：读写速度快，ns级别，但是掉电后所有数据丢失
* 外存：读写速度慢，ms甚至s级别，数据持久化避免丢失

### Redis是“单线程”的，但是又如何保证“单线程，高性能”

### 索引方式

`Redis` 和 `Memcached` 采用哈希表 `key-value` 作为索引，有些例如 `RocksDB` 则采用 **跳表** 作为索引

和简单 `K-V` 数据库不同，对于 Redis 由于value值支持多种不同的数据类型，当通过一个key找到对应的value之后，还需要操作value的数据结构进一步找到需要的实际数据

### 内存分配

内存分配器在处理随机大小的内存分块上，表现并不是很好。这也是memcached比redis为数不多的优点之一，memcached使用预分配内存大小，所以memcached只有内存浪费，没有内存碎片

### Redis的持久化机制和方案

1. 日志(AOF)
2. 快照(RDB)

### Redis的基本架构

1. Redis主要通过网络框架进行访问，没有采用动态链接库。这使得Redis可以作为一个 **基础性** 的中间服务进行访问
2. Redis数据模型中的value有很多种，因此带来了很多特定的操作接口。例如面向列表的LPUSH/LPOP，面向集合的SADD/SREM等等，这些不同的操作接口也对Redis的性能带来了不同程度的影响
3. Redis持久化方案：日志(AOF)和快照(RDB)