### 需要明确一点

在 `where` 语句里面是 **不能** 出现聚集函数的（都是数次笔试面试带来的血与泪的教训，今天一定要把它搞懂为什么，吃透）

### 为什么

用一个通俗易懂的说法来解释为什么 `where` 语句里不能出现聚集函数：

首先我们要知道 `where` 语句是用于筛选数据的，也就是说在执行 `where` 语句时，我们要的数据还没有拿到，此时的数据正在被 `where` 语句过滤

其次，聚集函数是用于统计 **已经** 筛选好的数据，把他们做一个统一处理

经过这么一说大致就明白了：`where` 语句时还没有拿到最后的数据，而聚集函数是用于统计最后的数据，也就是说他们连个存在先后关系，这也就解释了为什么聚集函数不能出现在 `where` 语句中。

### 解决办法

所如果我们想要对数据进行聚集函数操作，但是又不想把它 `select` 出来（聚集函数是可以出现在 `select` 语句中的），如下面这个例子：

筛选出年龄在25以上且工资高于平均水平的员工工号：
```
select 工号 from 员工表 where age > 25 and 工资 > avg(工资)
错误方式，因为聚集函数不能出现在where语句里
```

```
select 工号 from 员工表 where age > 25 having 工资 > avg(工资) group by 工号
使用having语句筛选过滤聚集函数的条件，使用group by语句分组显示最终结果
```

总结：
1. where 子句的作用是在对查询结果进行 **分组前** ，将不符合where条件的行去掉，即在 **分组前** 过滤数据，条件中 **不能** 包含聚组函数，使用where条件显示特定的行。

2. having 子句的作用是筛选满足条件的组，即在 **分组后** 过滤数据，条件中经常包含聚组函数，使用having 条件显示特定的组，也可以使用多个分组标准进行分组